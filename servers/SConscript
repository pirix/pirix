Import("target")

env = target.Clone(
    LIBS=["pirix", "pthread"],
    LIBPATH=["#build/$ARCH/lib"],
)

env.Append(
    CFLAGS=["-Wall", "-fno-stack-protector"],
    LINKFLAGS=["-T", "servers/link.ld"],
)

servers = []
servers.append(env.Program("system/system", env.Glob("system/*.c")))
servers.append(env.Program("login/login", env.Glob("login/*.c")))

Return("servers")
